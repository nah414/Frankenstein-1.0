# FRANKENSTEIN 1.0 - Eye of Sauron Configuration
# Phase 4: Master Orchestrator Agent
# Model: Phi-3.5 Mini 3.8B Instruct Q4_K_M (served via Ollama)
# Hardware: Dell i3 8th Gen, 4 cores, 8GB RAM

sauron:
  version: "1.1.0"

  model:
    name: "phi3.5:3.8b-mini-instruct-q4_K_M"
    provider: "ollama"
    quantization: "Q4_K_M"
    parameters: "3.8B"

  inference:
    # Profile B — Chat Primary (default when quantum engine is idle)
    num_ctx: 4096
    num_thread: 2
    temperature: 0.5
    top_p: 0.9
    repeat_penalty: 1.18
    repeat_last_n: 192
    num_predict: 250
    keep_alive: "3m"

  inference_quantum:
    # Profile A — Quantum Active (auto-selected when quantum engine is running)
    num_ctx: 2048
    num_thread: 2
    temperature: 0.5
    top_p: 0.9
    repeat_penalty: 1.18
    repeat_last_n: 192
    num_predict: 180
    keep_alive: "90s"

  resource_budget:
    max_ram_gb: 3.0            # Phi-3.5 model (~2.5GB) + 0.5GB inference buffer
    max_cpu_inference: 50      # Target CPU % during active inference
    max_cpu_idle: 5            # Target CPU % when loaded but waiting
    hard_cpu_limit: 80         # Emergency stop threshold (matches SAFETY)

  throttle_thresholds:
    soft_cpu: 65               # Begin reducing context/output
    soft_ram: 65
    hard_cpu: 75               # Switch to Profile A, enforce short outputs
    hard_ram: 75               # Max RAM ceiling
    emergency_cpu: 80          # Unload model + block inference
    emergency_ram: 90          # Spike tolerance ceiling before emergency unload

  behavior:
    lazy_load: true            # NEVER load at terminal startup
    idle_timeout_sec: 300      # 5 min inactivity → unload model
    max_conversation_turns: 16
    stream_by_default: true    # Stream output to terminal
    max_response_tokens_default: 250
    max_response_tokens_quantum: 180

  paths:
    log_file: "~/.frankenstein/logs/sauron.log"
